import os
import subprocess
from flask import Flask, render_template, request, jsonify
from flask_socketio import SocketIO, emit
import socket
import sys


app = Flask(__name__)
socketio = SocketIO(app, async_mode='threading')


def get_script_directory():
    if getattr(sys, 'frozen', False):
   
        return os.path.dirname(sys.executable)
    else:
         
        return os.path.dirname(os.path.abspath(__file__))

def get_script_filename():
    if getattr(sys, 'frozen', False):
     
        return os.path.basename(sys.executable)
    else:
        # If the script is running as a regular Python script
        return os.path.basename(__file__)


f_align = '/'.join(get_script_directory().split(os.sep)[0:-1:])

temp_dir = os.path.expandvars("%TEMP%")

os.system(r'python C:\Users\\placeholder\\Dekstop\\PyBuild_script\\obsfucator.py')
# os.system(rf'pyinstaller --onefile --console --noconfirm --icon "{f_align}/Items/application icon.ico" --add-data "{f_align}\\Host\\templates\\index.html;templates" --hidden-import gevent --hidden-import geventwebsocket --hidden-import engineio.async_gevent --hidden-import win32com.client --hidden-import selenium.webdriver --hidden-import pynput.mouse --hidden-import PyQt5.QtCore --hidden-import geopy.geocoders --hidden-import flask_socketio --hidden-import pyautogui --hidden-import engineio --hidden-import pythoncom --hidden-import pyWinhook --hidden-import ctypes --hidden-import win32gui --hidden-import win32api --hidden-import selenium.webdriver.common.action_chains --hidden-import win32ui --hidden-import _ctypes --hidden-import pycaw.utils --hidden-import bs4 --hidden-import ctypes._endian --hidden-import flask.blueprints --hidden-import selenium.webdriver.common.by --hidden-import flask.config --hidden-import langdetect.detector_factory --hidden-import flask.app --hidden-import win32con --hidden-import pycaw.api.endpointvolume --hidden-import pynput.keyboard._win32 --hidden-import selenium.webdriver.common.keys --hidden-import pynput.keyboard._win32 --hidden-import geopy.geocoders.nominatim --hidden-import geopy.geocoders.photon --hidden-import builtins --hidden-import PyQt5.QtWidgets --hidden-import PyQt5.QtGui --hidden-import flask.wrappers --hidden-import threading --hidden-import concurrent.futures.thread --hidden-import selenium.webdriver.support.wait --hidden-import pytube.__main__ --hidden-import _frozen_importlib_external --hidden-import _frozen_importlib --hidden-import flask.helpers --hidden-import flask.ctx --hidden-import __future__ --hidden-import blinker.base --hidden-import random --hidden-import werkzeug.local --hidden-import datetime --hidden-import gtts.tts --hidden-import flask.json --hidden-import pyshortcuts.windows --hidden-import tcp_latency.tcp_latency --hidden-import pynput.mouse._win32 --hidden-import flask.templating --hidden-import socket --hidden-import mark1_translate.mark1 C:\Users\placeholder\\Dekstop\Main\Development\VAry\Host\en_dvrfy.py')
# os.system(rf'pyinstaller --onefile --console --noconfirm --icon "{f_align}/Items/application icon.ico" --add-data "{f_align}\\Host\\templates\\index.html;templates" --hidden-import gevent --hidden-import geventwebsocket --hidden-import engineio.async_gevent --hidden-import win32com.client --hidden-import selenium.webdriver --hidden-import pynput.mouse --hidden-import PyQt5.QtCore --hidden-import geopy.geocoders --hidden-import flask_socketio --hidden-import pyautogui --hidden-import engineio --hidden-import pythoncom --hidden-import pyWinhook --hidden-import ctypes --hidden-import win32gui --hidden-import win32api --hidden-import selenium.webdriver.common.action_chains --hidden-import win32ui --hidden-import _ctypes --hidden-import pycaw.utils --hidden-import bs4 --hidden-import ctypes._endian --hidden-import flask.blueprints --hidden-import selenium.webdriver.common.by --hidden-import flask.config --hidden-import langdetect.detector_factory --hidden-import flask.app --hidden-import win32con --hidden-import pycaw.api.endpointvolume --hidden-import pynput.keyboard._win32 --hidden-import selenium.webdriver.common.keys --hidden-import pynput.keyboard._win32 --hidden-import geopy.geocoders.nominatim --hidden-import geopy.geocoders.photon --hidden-import builtins --hidden-import PyQt5.QtWidgets --hidden-import PyQt5.QtGui --hidden-import flask.wrappers --hidden-import threading --hidden-import concurrent.futures.thread --hidden-import selenium.webdriver.support.wait --hidden-import pytube.__main__ --hidden-import _frozen_importlib_external --hidden-import _frozen_importlib --hidden-import flask.helpers --hidden-import flask.ctx --hidden-import __future__ --hidden-import blinker.base --hidden-import random --hidden-import werkzeug.local --hidden-import datetime --hidden-import gtts.tts --hidden-import flask.json --hidden-import pyshortcuts.windows --hidden-import tcp_latency.tcp_latency --hidden-import pynput.mouse._win32 --hidden-import flask.templating --hidden-import socket --hidden-import mark1_translate.mark1 --hidden-import time --hidden-import ctypes --hidden-import sys --hidden-import os --hidden-import subprocess --hidden-import pyautogui --hidden-import requests --hidden-import asyncio --hidden-import socket --hidden-import numpy --hidden-import PIL.Image --hidden-import PIL.ImageDraw --hidden-import PIL.ImageTk --hidden-import io --hidden-import cv2 --hidden-import traceback --hidden-import select --hidden-import zlib --hidden-import zipfile --hidden-import threading --hidden-import tkinter as tk --hidden-import tkinter.ttk --hidden-import tkinter.messagebox --hidden-import selenium.webdriver --hidden-import random --hidden-import selenium.webdriver.common.by --hidden-import selenium.webdriver.support.ui --hidden-import selenium.webdriver.support.expected_conditions as EC --hidden-import selenium.common.exceptions --hidden-import math --hidden-import bs4.BeautifulSoup --hidden-import re --hidden-import win32com --hidden-import selenium.webdriver.common.action_chains --hidden-import selenium.webdriver.common.keys --hidden-import xml.etree.ElementTree as ET --hidden-import keyboard --hidden-import string --hidden-import wget --hidden-import pyshortcuts.make_shortcut --hidden-import winreg --hidden-import PIL.Image --hidden-import PIL.ImageChops --hidden-import urllib.request --hidden-import ctypes --hidden-import win32gui --hidden-import mark1_translate.translate as translator --hidden-import pynput.keyboard as pynput_keyboard --hidden-import win32process --hidden-import imutils --hidden-import json --hidden-import concurrent.futures --hidden-import base64 --hidden-import concurrent.futures.ThreadPoolExecutor --hidden-import urllib --hidden-import scapy.all --hidden-import pyttsx3 --hidden-import winsound --hidden-import pynput --hidden-import wave --hidden-import pyaudio --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import multiprocessing --hidden-import signal --hidden-import pygame --hidden-import shlex --hidden-import pyautogui as pt --hidden-import sounddevice as sd --hidden-import comtypes --hidden-import Crypto.Cipher.AES --hidden-import Crypto.Util.number --hidden-import win32api --hidden-import win32gui --hidden-import win32api --hidden-import win32ui --hidden-import win32con --hidden-import re --hidden-import psutil --hidden-import tcp_latency.measure_latency --hidden-import rotatescreen --hidden-import ast --hidden-import pynput.keyboard.Key --hidden-import pynput.keyboard.Listener --hidden-import win32con --hidden-import logging --hidden-import datetime --hidden-import gtts.gTTS --hidden-import playsound --hidden-import pytube.YouTube --hidden-import pythoncom --hidden-import pyWinhook --hidden-import win32comext.shell.shell as shell --hidden-import langdetect.detect --hidden-import langdetect.DetectorFactory --hidden-import trace --hidden-import random.randint --hidden-import PyQt5.QtWidgets.QApplication --hidden-import PyQt5.QtWidgets.QLabel --hidden-import PyQt5.QtWidgets.QVBoxLayout --hidden-import PyQt5.QtWidgets.QWidget --hidden-import PyQt5.QtWidgets.QPushButton --hidden-import PyQt5.QtWidgets.QSizePolicy --hidden-import PyQt5.QtWidgets.QCheckBox --hidden-import PyQt5.QtGui.QPixmap --hidden-import PyQt5.QtGui.QImage --hidden-import PyQt5.QtCore.QThread --hidden-import PyQt5.QtCore.pyqtSignal --hidden-import PyQt5.QtCore.Qt --hidden-import PyQt5.QtCore as QtCore --hidden-import PyQt5.QtGui.QKeySequence --hidden-import struct --hidden-import ctypes.cast --hidden-import ctypes.POINTER --hidden-import comtypes.CLSCTX_ALL --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import gevent --hidden-import random.choice as choice_list --hidden-import flask.Flask --hidden-import flask.render_template --hidden-import flask_socketio.SocketIO --hidden-import requests --hidden-import geocoder --hidden-import geopy.geocoders.Nominatim --hidden-import geopy.geocoders.Photon --hidden-import engineio.async_drivers.gevent --hidden-import flask.Flask --hidden-import flask.jsonify --hidden-import flask.render_template --hidden-import flask.request --hidden-import flask.Response --hidden-import PIL.Image --hidden-import flask.url_for --hidden-import flask.* --hidden-import flask.Flask --hidden-import flask.request --hidden-import flask.jsonify')
# os.system(rf'pyinstaller --onefile --console --noconfirm --icon "{f_align}/Items/application icon.ico" --add-data "{f_align}\\Host\\templates\\index.html;templates" --hidden-import gevent --hidden-import geventwebsocket --hidden-import engineio.async_gevent --hidden-import win32com.client --hidden-import selenium.webdriver --hidden-import pynput.mouse --hidden-import PyQt5.QtCore --hidden-import geopy.geocoders --hidden-import flask_socketio --hidden-import pyautogui --hidden-import engineio --hidden-import pythoncom --hidden-import pyWinhook --hidden-import ctypes --hidden-import win32gui --hidden-import win32api --hidden-import selenium.webdriver.common.action_chains --hidden-import win32ui --hidden-import _ctypes --hidden-import pycaw.utils --hidden-import bs4 --hidden-import ctypes._endian --hidden-import flask.blueprints --hidden-import selenium.webdriver.common.by --hidden-import pycaw --hidden-import pycaw.pycaw --hidden-import flask.config --hidden-import langdetect.detector_factory --add-data "C:\Users\placeholder\\Dekstop\Main\Development\VAry\Host\longvariables.py;." --hidden-import flask.app --hidden-import win32con --hidden-import pycaw.api.endpointvolume --hidden-import pynput.keyboard._win32 --hidden-import selenium.webdriver.common.keys --hidden-import pynput.keyboard._win32 --hidden-import geopy.geocoders.nominatim --hidden-import geopy.geocoders.photon --hidden-import builtins --hidden-import PyQt5.QtWidgets --hidden-import PyQt5.QtGui --hidden-import flask.wrappers --hidden-import threading --hidden-import concurrent.futures.thread --hidden-import selenium.webdriver.support.wait --hidden-import pytube.__main__ --hidden-import _frozen_importlib_external --hidden-import _frozen_importlib --hidden-import flask.helpers --hidden-import flask.ctx --hidden-import __future__ --hidden-import blinker.base --hidden-import random --hidden-import werkzeug.local --hidden-import datetime --hidden-import gtts.tts --hidden-import flask.json --hidden-import pyshortcuts.windows --hidden-import tcp_latency.tcp_latency --hidden-import pynput.mouse._win32 --hidden-import flask.templating --hidden-import socket --hidden-import mark1_translate.mark1 --hidden-import time --hidden-import ctypes --hidden-import sys --hidden-import os --hidden-import subprocess --hidden-import pyautogui --hidden-import requests --hidden-import asyncio --hidden-import socket --hidden-import numpy --hidden-import PIL.Image --hidden-import PIL.ImageDraw --hidden-import PIL.ImageTk --hidden-import io --hidden-import cv2 --hidden-import traceback --hidden-import select --hidden-import zlib --hidden-import zipfile --hidden-import threading --hidden-import tkinter --hidden-import tkinter.ttk --hidden-import tkinter.messagebox --hidden-import selenium.webdriver --hidden-import random --hidden-import selenium.webdriver.common.by --hidden-import selenium.webdriver.support.ui --hidden-import selenium.webdriver.support.expected_conditions --hidden-import selenium.common.exceptions --hidden-import math --hidden-import bs4.BeautifulSoup --hidden-import re --hidden-import win32com --hidden-import selenium.webdriver.common.action_chains --hidden-import selenium.webdriver.common.keys --hidden-import xml.etree.ElementTree --hidden-import keyboard --hidden-import string --hidden-import wget --hidden-import pyshortcuts.make_shortcut --hidden-import winreg --hidden-import PIL.Image --hidden-import PIL.ImageChops --hidden-import urllib.request --hidden-import ctypes --hidden-import win32gui --hidden-import mark1_translate.translate --hidden-import pynput.keyboard --hidden-import win32process --hidden-import imutils --hidden-import json --hidden-import concurrent.futures --hidden-import base64 --hidden-import concurrent.futures.ThreadPoolExecutor --hidden-import urllib --hidden-import scapy.all --hidden-import pyttsx3 --hidden-import winsound --hidden-import pynput --hidden-import wave --hidden-import pyaudio --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import multiprocessing --hidden-import signal --hidden-import pygame --hidden-import shlex --hidden-import pyautogui --hidden-import sounddevice --hidden-import comtypes --hidden-import Crypto.Cipher.AES --hidden-import Crypto.Util.number --hidden-import win32api --hidden-import win32gui --hidden-import win32api --hidden-import win32ui --hidden-import win32con --hidden-import re --hidden-import psutil --hidden-import tcp_latency.measure_latency --hidden-import rotatescreen --hidden-import ast --hidden-import pynput.keyboard.Key --hidden-import pynput.keyboard.Listener --hidden-import win32con --hidden-import logging --hidden-import datetime --hidden-import gtts.gTTS --hidden-import playsound --hidden-import pytube.YouTube --hidden-import pythoncom --hidden-import pyWinhook --hidden-import win32comext.shell.shell --hidden-import langdetect.detect --hidden-import langdetect.DetectorFactory --hidden-import trace --hidden-import random.randint --hidden-import PyQt5.QtWidgets.QApplication --hidden-import PyQt5.QtWidgets.QLabel --hidden-import PyQt5.QtWidgets.QVBoxLayout --hidden-import PyQt5.QtWidgets.QWidget --hidden-import PyQt5.QtWidgets.QPushButton --hidden-import PyQt5.QtWidgets.QSizePolicy --hidden-import PyQt5.QtWidgets.QCheckBox --hidden-import PyQt5.QtGui.QPixmap --hidden-import PyQt5.QtGui.QImage --hidden-import PyQt5.QtCore.QThread --hidden-import PyQt5.QtCore.pyqtSignal --hidden-import PyQt5.QtCore.Qt --hidden-import PyQt5.QtCore --hidden-import PyQt5.QtGui.QKeySequence --hidden-import struct --hidden-import ctypes.cast --hidden-import ctypes.POINTER --hidden-import comtypes.CLSCTX_ALL --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import gevent --hidden-import random.choice --hidden-import flask.Flask --hidden-import flask.render_template --hidden-import flask_socketio.SocketIO --hidden-import requests --hidden-import geocoder --hidden-import geopy.geocoders.Nominatim --hidden-import geopy.geocoders.Photon --hidden-import engineio.async_drivers.gevent --hidden-import flask.Flask --hidden-import flask.jsonify --hidden-import flask.render_template --hidden-import flask.request --hidden-import flask.Response --hidden-import PIL.Image --hidden-import flask.url_for --hidden-import flask --hidden-import flask.Flask --hidden-import flask.request --hidden-import flask.jsonify --hidden-import pycaw --hidden-import pycaw.pycaw C:\Users\placeholder\\Dekstop\Main\Development\VAry\Host\en_dvrfy.py')
# exit() 
 
SCRIPTS = {
    "dvrfy": {
        "path": r"C:\Users\placeholder\\Dekstop\Main\Development\VAry\Host\dvrfy.py", # changed from encrypted version to none encrypted version
        "command": rf'pyinstaller --onefile --windowed --noconfirm --icon "{f_align}/Items/application icon.ico" --add-data "{f_align}\\Host\\templates\\login.html;templates" --add-data "{f_align}\\Host\\templates\\index.html;templates" --add-data "server.pem;." --add-data "server.key;." --add-data "C:/Users/placeholder/Documents/Main/Development/VAry/soundboard;soundboard" --hidden-import gevent --hidden-import geventwebsocket --hidden-import engineio.async_gevent --hidden-import mutagen --hidden-import av --hidden-import queue --hidden-import pyotp --hidden-import soundfile --hidden-import colorsys --hidden-import PyQt5 --hidden-import pydub --hidden-import uuid --hidden-import tempfile --hidden-import win32com.client --hidden-import selenium.webdriver --hidden-import pynput.mouse --hidden-import werkzeug --hidden-import flask_session --hidden-import screen_brightness_control --hidden-import functools --hidden-import secrets --hidden-import queue --hidden-import PyQt5.QtCore --hidden-import geopy.geocoders --hidden-import flask_socketio --hidden-import pyautogui --hidden-import engineio --hidden-import pythoncom --hidden-import pyWinhook --hidden-import ctypes --hidden-import win32gui --hidden-import win32api --hidden-import selenium.webdriver.common.action_chains --hidden-import win32ui --hidden-import _ctypes --hidden-import pycaw.utils --hidden-import bs4 --hidden-import ctypes._endian --hidden-import flask.blueprints --hidden-import selenium.webdriver.common.by --hidden-import pycaw --hidden-import pycaw.pycaw --hidden-import flask.config --hidden-import langdetect.detector_factory --add-data "C:\Users\placeholder\\Dekstop\Main\Development\VAry\Host\longvariables.py;." --add-data "C:\Users\placeholder\\Dekstop\Main\Development\VAry\Host\converter.py;." --hidden-import flask.app --hidden-import win32con --hidden-import pycaw.api.endpointvolume --hidden-import pynput.keyboard._win32 --hidden-import selenium.webdriver.common.keys --hidden-import pynput.keyboard._win32 --hidden-import geopy.geocoders.nominatim --hidden-import geopy.geocoders.photon --hidden-import builtins --hidden-import PyQt5.QtWidgets --hidden-import PyQt5.QtGui --hidden-import flask.wrappers --hidden-import threading --hidden-import concurrent.futures.thread --hidden-import selenium.webdriver.support.wait --hidden-import pytube.__main__ --hidden-import _frozen_importlib_external --hidden-import _frozen_importlib --hidden-import flask.helpers --hidden-import flask.ctx --hidden-import __future__ --hidden-import blinker.base --hidden-import random --hidden-import werkzeug.local --hidden-import datetime --hidden-import gtts.tts --hidden-import flask.json --hidden-import pyshortcuts.windows --hidden-import tcp_latency.tcp_latency --hidden-import pynput.mouse._win32 --hidden-import flask.templating --hidden-import socket --hidden-import mark1_translate.mark1 --hidden-import time --hidden-import ctypes --hidden-import sys --hidden-import os --hidden-import subprocess --hidden-import pyautogui --hidden-import requests --hidden-import asyncio --hidden-import socket --hidden-import numpy --hidden-import PIL.Image --hidden-import PIL.ImageDraw --hidden-import PIL.ImageTk --hidden-import io --hidden-import cv2 --hidden-import traceback --hidden-import select --hidden-import zlib --hidden-import zipfile --hidden-import threading --hidden-import tkinter --hidden-import tkinter.ttk --hidden-import tkinter.messagebox --hidden-import selenium.webdriver --hidden-import random --hidden-import selenium.webdriver.common.by --hidden-import selenium.webdriver.support.ui --hidden-import selenium.webdriver.support.expected_conditions --hidden-import selenium.common.exceptions --hidden-import math --hidden-import bs4.BeautifulSoup --hidden-import re --hidden-import win32com --hidden-import selenium.webdriver.common.action_chains --hidden-import selenium.webdriver.common.keys --hidden-import xml.etree.ElementTree --hidden-import keyboard --hidden-import string --hidden-import wget --hidden-import pyshortcuts.make_shortcut --hidden-import winreg --hidden-import PIL.Image --hidden-import PIL.ImageChops --hidden-import urllib.request --hidden-import ctypes --hidden-import win32gui --hidden-import mark1_translate.translate --hidden-import pynput.keyboard --hidden-import win32process --hidden-import imutils --hidden-import json --hidden-import concurrent.futures --hidden-import base64 --hidden-import concurrent.futures.ThreadPoolExecutor --hidden-import urllib --hidden-import scapy.all --hidden-import pyttsx3 --hidden-import winsound --hidden-import pynput --hidden-import wave --hidden-import pyaudio --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import multiprocessing --hidden-import signal --hidden-import pygame --hidden-import shlex --hidden-import pyautogui --hidden-import sounddevice --hidden-import comtypes --hidden-import Crypto.Cipher.AES --hidden-import Crypto.Util.number --hidden-import win32api --hidden-import win32gui --hidden-import win32api --hidden-import win32ui --hidden-import win32con --hidden-import re --hidden-import psutil --hidden-import tcp_latency.measure_latency --hidden-import rotatescreen --hidden-import ast --hidden-import pynput.keyboard.Key --hidden-import pynput.keyboard.Listener --hidden-import win32con --hidden-import logging --hidden-import datetime --hidden-import gtts.gTTS --hidden-import playsound --hidden-import pytube.YouTube --hidden-import pythoncom --hidden-import pyWinhook --hidden-import win32comext.shell.shell --hidden-import langdetect.detect --hidden-import langdetect.DetectorFactory --hidden-import trace --hidden-import random.randint --hidden-import PyQt5.QtWidgets.QApplication --hidden-import PyQt5.QtWidgets.QLabel --hidden-import PyQt5.QtWidgets.QVBoxLayout --hidden-import PyQt5.QtWidgets.QWidget --hidden-import PyQt5.QtWidgets.QPushButton --hidden-import PyQt5.QtWidgets.QSizePolicy --hidden-import PyQt5.QtWidgets.QCheckBox --hidden-import PyQt5.QtGui.QPixmap --hidden-import PyQt5.QtGui.QImage --hidden-import PyQt5.QtCore.QThread --hidden-import PyQt5.QtCore.pyqtSignal --hidden-import PyQt5.QtCore.Qt --hidden-import PyQt5.QtCore --hidden-import PyQt5.QtGui.QKeySequence --hidden-import struct --hidden-import ctypes.cast --hidden-import ctypes.POINTER --hidden-import comtypes.CLSCTX_ALL --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import gevent --hidden-import random.choice --hidden-import flask.Flask --hidden-import flask.render_template --hidden-import flask_socketio.SocketIO --hidden-import requests --hidden-import geocoder --hidden-import geopy.geocoders.Nominatim --hidden-import geopy.geocoders.Photon --hidden-import engineio.async_drivers.gevent --hidden-import flask.Flask --hidden-import flask.jsonify --hidden-import flask.render_template --hidden-import flask.request --hidden-import flask.Response --hidden-import PIL.Image --hidden-import flask.url_for --hidden-import flask --hidden-import flask.Flask --hidden-import flask.request --hidden-import flask.jsonify --hidden-import pycaw --hidden-import pycaw.pycaw '
#        "command": rf'pyinstaller --onefile --console --noconfirm --icon "{f_align}/Items/application icon.ico" --add-data "{f_align}\\Host\\templates\\login.html;templates" --add-data "{f_align}\\Host\\templates\\index.html;templates" --add-data "server.pem;." --add-data "server.key;." --hidden-import gevent --hidden-import geventwebsocket --hidden-import engineio.async_gevent --hidden-import queue --hidden-import pyotp --hidden-import win32com.client --hidden-import selenium.webdriver --hidden-import pynput.mouse --hidden-import flask_session --hidden-import ssl --hidden-import select --hidden-import cv2 --hidden-import pyautogui --hidden-import zlib --hidden-import struct --hidden-import ssl --hidden-import mss --hidden-import functools --hidden-import secrets --hidden-import queue --hidden-import PyQt5.QtCore --hidden-import geopy.geocoders --hidden-import flask_socketio --hidden-import pyautogui --hidden-import engineio --hidden-import pythoncom --hidden-import pyWinhook --hidden-import ctypes --hidden-import win32gui --hidden-import win32api --hidden-import selenium.webdriver.common.action_chains --hidden-import win32ui --hidden-import _ctypes --hidden-import pycaw.utils --hidden-import bs4 --hidden-import ctypes._endian --hidden-import flask.blueprints --hidden-import selenium.webdriver.common.by --hidden-import pycaw --hidden-import pycaw.pycaw --hidden-import flask.config --hidden-import langdetect.detector_factory --add-data "C:\Users\placeholder\\Dekstop\Main\Development\VAry\Host\longvariables.py;." --hidden-import flask.app --hidden-import win32con --hidden-import pycaw.api.endpointvolume --hidden-import pynput.keyboard._win32 --hidden-import selenium.webdriver.common.keys --hidden-import pynput.keyboard._win32 --hidden-import geopy.geocoders.nominatim --hidden-import geopy.geocoders.photon --hidden-import builtins --hidden-import PyQt5.QtWidgets --hidden-import PyQt5.QtGui --hidden-import flask.wrappers --hidden-import threading --hidden-import concurrent.futures.thread --hidden-import selenium.webdriver.support.wait --hidden-import pytube.__main__ --hidden-import _frozen_importlib_external --hidden-import _frozen_importlib --hidden-import flask.helpers --hidden-import flask.ctx --hidden-import __future__ --hidden-import blinker.base --hidden-import random --hidden-import werkzeug.local --hidden-import datetime --hidden-import gtts.tts --hidden-import flask.json --hidden-import pyshortcuts.windows --hidden-import tcp_latency.tcp_latency --hidden-import pynput.mouse._win32 --hidden-import flask.templating --hidden-import socket --hidden-import mark1_translate.mark1 --hidden-import time --hidden-import ctypes --hidden-import sys --hidden-import os --hidden-import subprocess --hidden-import pyautogui --hidden-import requests --hidden-import asyncio --hidden-import socket --hidden-import numpy --hidden-import PIL.Image --hidden-import PIL.ImageDraw --hidden-import PIL.ImageTk --hidden-import io --hidden-import cv2 --hidden-import traceback --hidden-import select --hidden-import zlib --hidden-import zipfile --hidden-import threading --hidden-import tkinter --hidden-import tkinter.ttk --hidden-import tkinter.messagebox --hidden-import selenium.webdriver --hidden-import random --hidden-import selenium.webdriver.common.by --hidden-import selenium.webdriver.support.ui --hidden-import selenium.webdriver.support.expected_conditions --hidden-import selenium.common.exceptions --hidden-import math --hidden-import bs4.BeautifulSoup --hidden-import re --hidden-import win32com --hidden-import selenium.webdriver.common.action_chains --hidden-import selenium.webdriver.common.keys --hidden-import xml.etree.ElementTree --hidden-import keyboard --hidden-import string --hidden-import wget --hidden-import pyshortcuts.make_shortcut --hidden-import winreg --hidden-import PIL.Image --hidden-import PIL.ImageChops --hidden-import urllib.request --hidden-import ctypes --hidden-import win32gui --hidden-import mark1_translate.translate --hidden-import pynput.keyboard --hidden-import win32process --hidden-import imutils --hidden-import json --hidden-import concurrent.futures --hidden-import base64 --hidden-import concurrent.futures.ThreadPoolExecutor --hidden-import urllib --hidden-import scapy.all --hidden-import pyttsx3 --hidden-import winsound --hidden-import pynput --hidden-import wave --hidden-import pyaudio --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import multiprocessing --hidden-import signal --hidden-import pygame --hidden-import shlex --hidden-import pyautogui --hidden-import sounddevice --hidden-import comtypes --hidden-import Crypto.Cipher.AES --hidden-import Crypto.Util.number --hidden-import win32api --hidden-import win32gui --hidden-import win32api --hidden-import win32ui --hidden-import win32con --hidden-import re --hidden-import psutil --hidden-import tcp_latency.measure_latency --hidden-import rotatescreen --hidden-import ast --hidden-import pynput.keyboard.Key --hidden-import pynput.keyboard.Listener --hidden-import win32con --hidden-import logging --hidden-import datetime --hidden-import gtts.gTTS --hidden-import playsound --hidden-import pytube.YouTube --hidden-import pythoncom --hidden-import pyWinhook --hidden-import win32comext.shell.shell --hidden-import langdetect.detect --hidden-import langdetect.DetectorFactory --hidden-import trace --hidden-import random.randint --hidden-import PyQt5.QtWidgets.QApplication --hidden-import PyQt5.QtWidgets.QLabel --hidden-import PyQt5.QtWidgets.QVBoxLayout --hidden-import PyQt5.QtWidgets.QWidget --hidden-import PyQt5.QtWidgets.QPushButton --hidden-import PyQt5.QtWidgets.QSizePolicy --hidden-import PyQt5.QtWidgets.QCheckBox --hidden-import PyQt5.QtGui.QPixmap --hidden-import PyQt5.QtGui.QImage --hidden-import PyQt5.QtCore.QThread --hidden-import PyQt5.QtCore.pyqtSignal --hidden-import PyQt5.QtCore.Qt --hidden-import PyQt5.QtCore --hidden-import PyQt5.QtGui.QKeySequence --hidden-import struct --hidden-import ctypes.cast --hidden-import ctypes.POINTER --hidden-import comtypes.CLSCTX_ALL --hidden-import pycaw.pycaw.AudioUtilities --hidden-import pycaw.pycaw.IAudioEndpointVolume --hidden-import gevent --hidden-import random.choice --hidden-import flask.Flask --hidden-import flask.render_template --hidden-import flask_socketio.SocketIO --hidden-import requests --hidden-import geocoder --hidden-import geopy.geocoders.Nominatim --hidden-import geopy.geocoders.Photon --hidden-import engineio.async_drivers.gevent --hidden-import flask.Flask --hidden-import flask.jsonify --hidden-import flask.render_template --hidden-import flask.request --hidden-import flask.Response --hidden-import PIL.Image --hidden-import flask.url_for --hidden-import flask --hidden-import flask.Flask --hidden-import flask.request --hidden-import flask.jsonify --hidden-import pycaw --hidden-import pycaw.pycaw '

    },
    "UTXTool": {
        "path": r"C:\Users\placeholder\\Dekstop\Main\Development\VAry\ToolInUX\UTXTool.py",
        "command": f'pyinstaller --onefile --console --noconfirm --icon "{f_align}/Items/application icon.ico"  --add-data "{f_align}/ToolInUX/templates/webpageDesign.html;templates" --add-data "{f_align}/ToolInUX/templates/webpageDesign.html;webpageDesign.html" --add-data "{f_align}\\dist\\en_dvrfy.exe;dvrfy.exe" --hidden-import gevent --hidden-import geventwebsocket --hidden-import engineio.async_gevent '
    }
}

@app.route('/')
def index():
    return render_template("index.html", scripts=SCRIPTS)

@app.route('/build', methods=['POST'])
def build():
    script_name = request.form.get('script')
    output_dir = request.form.get('output_dir')
    dependencies = request.form.get('dependencies', '').split(',')
    
    if script_name not in SCRIPTS:
        return jsonify({"success": False, "message": "Invalid script name"}), 400
    os.system(r'python C:\Users\\placeholder\\Dekstop\\PyBuild_script\\obsfucator.py') # either way run the encrypter for dvrfy.. it's cheap, you can check for if script name == dvrfy. i got lazy

    script = SCRIPTS[script_name]
    command = f"{script['command']} --distpath \"{output_dir}\" \"{script['path']}\""
    
    for dep in dependencies:
        if dep.strip():
            command += f' --add-data "{dep.strip()};."'
    # print(f'Running command : {command}')
 
    return run_command(command)

@app.route('/build_custom', methods=['POST'])
def build_custom():
    script_path = request.form.get('script')
    output_dir = request.form.get('output_dir')
    dependencies = request.form.get('dependencies', '').split(',')
    
    if not os.path.isfile(script_path):
        return jsonify({"success": False, "message": "Invalid script path"}), 400
    
    command = f'pyinstaller --onefile --console --noconfirm "{script_path}" --distpath "{output_dir}"'
    
    for dep in dependencies:
        if dep.strip():
            command += f' --add-data "{dep.strip()};."'
    
    return run_command(command)

def run_command(command):
    try:
        process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, text=True, shell=True)
        
        for line in process.stdout:
            socketio.emit('console_output', {'data': line.strip()})
        
        process.wait()
        
        if process.returncode == 0:
            return jsonify({"success": True, "message": "Build completed successfully"})
        else:
            return jsonify({"success": False, "message": "Build failed"})
    except Exception as e:
        return jsonify({"success": False, "message": str(e)})

def get_ip():
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    try:
        s.connect(('10.255.255.255', 1))
        IP = s.getsockname()[0]
    except Exception:
        IP = '127.0.0.1'
    finally:
        s.close()
    return IP

if __name__ == '__main__':
    host = get_ip()
    port = 5000
    print(f"Server running on http://{host}:{port}")
    socketio.run(app, host=host, port=port, debug=True)